<div card-header class="space-y-1">
  <h2 class="text-2xl font-semibold tracking-tight">Connexion</h2>
  <p class="text-sm text-muted-foreground">Accédez à vos espaces client ou vendeur.</p>
</div>

<form class="space-y-5" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
  <div class="space-y-2">
    <label uiLabel for="email">Adresse e-mail</label>
    <input
      id="email"
      type="email"
      uiInput
      placeholder="vous@example.com"
      formControlName="email"
      autocomplete="email"
      [attr.aria-invalid]="
        controlHasError('email', 'required') || controlHasError('email', 'email')
      "
    />
    <p *ngIf="controlHasError('email', 'required')" class="text-xs text-destructive">
      L'adresse e-mail est obligatoire.
    </p>
    <p *ngIf="controlHasError('email', 'email')" class="text-xs text-destructive">
      Format d'adresse e-mail invalide.
    </p>
  </div>

  <div class="space-y-2">
    <label uiLabel for="password">Mot de passe</label>
    <input
      id="password"
      type="password"
      uiInput
      placeholder="••••••••"
      formControlName="password"
      autocomplete="current-password"
      [attr.aria-invalid]="
        controlHasError('password', 'required') || controlHasError('password', 'minlength')
      "
    />
    <p *ngIf="controlHasError('password', 'required')" class="text-xs text-destructive">
      Le mot de passe est obligatoire.
    </p>
    <p *ngIf="controlHasError('password', 'minlength')" class="text-xs text-destructive">
      Le mot de passe doit contenir au moins 8 caractères.
    </p>
  </div>

  <div class="flex items-center justify-between gap-4 text-sm">
    <label class="inline-flex items-center gap-2">
      <input
        type="checkbox"
        formControlName="rememberMe"
        class="h-4 w-4 rounded border-border text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      />
      <span>Se souvenir de moi</span>
    </label>
    <a routerLink="/auth/signup" class="text-sm font-medium text-primary hover:underline">
      Pas encore de compte ?
    </a>
  </div>

  <button hlmBtn class="w-full justify-center" type="submit" [disabled]="submitting()">
    <span *ngIf="!submitting(); else loading">Se connecter</span>
  </button>
</form>

<ng-template #loading>
  <span class="flex items-center justify-center gap-2">
    <span class="h-3 w-3 animate-ping rounded-full bg-primary"></span>
    Connexion en cours...
  </span>
</ng-template>
