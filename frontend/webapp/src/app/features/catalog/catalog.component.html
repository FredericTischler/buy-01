<section class="mx-auto w-full max-w-7xl px-4 py-10">
  <header class="mb-6 flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
    <div>
      <h1 class="text-3xl font-semibold tracking-tight text-foreground">Catalogue produits</h1>
      <p class="text-sm text-muted-foreground">
        Parcourez les produits disponibles et découvrez les nouveautés publiées par nos vendeurs.
      </p>
    </div>
  </header>

  @if (loading()) {
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      @for (skeleton of [1, 2, 3, 4, 5, 6]; track skeleton) {
        <ui-card>
          <div class="space-y-4">
            <ui-skeleton height="180px" radius="12px" />
            <div class="space-y-2">
              <ui-skeleton height="20px" width="60%" />
              <ui-skeleton height="16px" width="40%" />
            </div>
            <ui-skeleton height="16px" width="80%" />
          </div>
        </ui-card>
      }
    </div>
  } @else {
    @if (products().length) {
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        @for (product of products(); track product.id) {
          <ui-card class="cursor-pointer transition hover:shadow-md" (click)="openProduct(product)">
            <div card-media class="overflow-hidden rounded-lg bg-muted">
              @if (product.media?.length) {
                <img
                  [src]="product.media![0].secureUrl"
                  [alt]="product.name"
                  class="h-48 w-full object-cover transition duration-300 hover:scale-[1.03]"
                />
              } @else {
                <div class="flex h-48 items-center justify-center text-sm text-muted-foreground">
                  Image indisponible
                </div>
              }
            </div>
            <div class="space-y-2">
              <h2 class="text-lg font-semibold leading-snug text-foreground">
                {{ product.name }}
              </h2>
              <p class="description-clamp text-sm text-muted-foreground">
                {{ product.description }}
              </p>
              <div class="flex items-center justify-between text-sm">
                <span class="text-base font-semibold text-foreground">
                  {{ product.price | currency: 'EUR' : 'symbol-narrow' : 'fr-FR' }}
                </span>
                <span class="text-muted-foreground">Vendeur #{{ product.sellerId | slice:0:8 }}</span>
              </div>
            </div>
          </ui-card>
        }
      </div>
    } @else {
      <div
        class="rounded-lg border border-dashed border-border p-8 text-center text-muted-foreground"
      >
        Aucun produit n'est disponible pour le moment. Revenez bientôt !
      </div>
    }
  }
</section>
